<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Demo</title>
  </head>
  <body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="position:fixed; top:160px; right:0px; width: 800px; height: 400px;"></div>
<script>
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                marginRight: 0,
                marginBottom: 80
            },
            yAxis: {
                title: {
                    text: 'Score'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        this.x +': '+ this.y +'Â°C';
                }
            },
            series: [{
                data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
            }]
        });
    });
});
</script>



<h1>ENPS Pistol Matches</h1>
<h2>Overall Results 2006 - 2012</h2>

[% USE DBI; 
   DBI.connect("dbi:SQLite:dbname=enps.sqlite","","");
%]
<table>
   <tr>
      <th>Last name</th>
      <th>First name</th>
      <th>Total Points</th>
   </tr>
[% FOREACH user = DBI.query('select lname, fname, sum(points) points from results group by lname, fname order by sum(points) desc'); %]
   <tr>
      <td>[% user.lname %]</td>
      <td>[% user.fname %]</td>
      <td>[% user.points %]</td>
   </tr>
[% END %]
</table>





</body>
</html>
